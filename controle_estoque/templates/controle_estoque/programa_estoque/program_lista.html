{% extends 'global/template.html' %}
{% load static %}
{% block css %}
.modal-sheet .modal-dialog {
    width: 380px;
    transition: bottom .75s ease-in-out;
  }
  .modal-sheet .modal-footer {
    padding-bottom: 2rem;
    
  }
  .content-main{
    overflow-y: scroll;
  }

/* Minhas Personalizações */
#info_estoque{
  width:37% 
}


.border{
  border:none;
}


  /* Estilo iOS */
  .switch__container {
    margin: 3px auto;
  }
  
  .switch {
    visibility: hidden;
    position: absolute;
    margin-left: -9999px;
  }
  
  .switch + label {
    display: block;
    position: relative;
    cursor: pointer;
    outline: none;
    user-select: none;
  }

  .switch + label {
    display: block;
    position: relative;
    cursor: pointer;
    outline: none;
    user-select: none;
  }
  
  .switch--flat + label {
    padding: 2px;
    width: 90px;
    height: 30px;
    background-color: #dddddd;
    border-radius: 30px;
  }
  .switch--flat + label:before,
  .switch--flat + label:after {
    display: block;
    position: absolute;
    top: 1px;
    left: 1px;
    bottom: 1px;
    content: "";
  }
  .switch--flat + label:before {
    right: 1px;
    background-color: #f1f1f1;
    border-radius: 30px;
    transition: background 0.4s;
  }
  .switch--flat + label:after {
    width: 32px;
    background-color: #fff;
    border-radius: 100%;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    transition: all 0.4s;
  }
  .switch--flat:checked + label:before {
    background-color: #8ce196;
  }
  .switch--flat:checked + label:after {
    transform: translateX(60px);
  }


  
  .switch--shadow + label {
    padding: 2px;
    width: 90px;
    height: 30px;
    background-color: #dddddd;
    border-radius: 30px;
  }
  .switch--shadow + label:before,
  .switch--shadow + label:after {
    display: block;
    position: absolute;
    top: 1px;
    left: 1px;
    bottom: 1px;
    content: "";
  }
  .switch--shadow + label:before {
    right: 1px;
    background-color: #f1f1f1;
    border-radius: 30px;
    transition: background 0.4s;
  }
  .switch--shadow + label:after {
    width: 32px;
    background-color: #fff;
    border-radius: 100%;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    transition: all 0.4s;
  }
  .switch--shadow:checked + label:before {
    background-color: #8ce196;
  }
  .switch--shadow:checked + label:after {
    transform: translateX(60px);
  }



  .switch--estoque + label {
    padding: 2px;
    width: 90px;
    height: 30px;
    background-color: #dddddd;
    border-radius: 30px;
  }
  .switch--estoque + label:before,
  .switch--estoque + label:after {
    display: block;
    position: absolute;
    top: 1px;
    left: 1px;
    bottom: 1px;
    content: "";
  }
  .switch--estoque + label:before {
    right: 1px;
    background-color: #f1f1f1;
    border-radius: 30px;
    transition: background 0.4s;
  }
  .switch--estoque + label:after {
    width: 32px;
    background-color: #fff;
    border-radius: 100%;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    transition: all 0.4s;
  }
  .switch--estoque:checked + label:before {
    background-color: #8ce196;
  }
  .switch--estoque:checked + label:after {
    transform: translateX(60px);
  }

  
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">




  

{% endblock css %}
{% block menu_horizontal %}
<!--Menu horizontal Local-->
{% include 'global/partials/breadcrumbs/index.html' %}

{% endblock menu_horizontal %}
{% block main %}






  <div class="col" style='margin-bottom:-2rem'>    
    <div class="d-flex bg-body-secondary p-2 ">
      <h2 class='raleway'>{{svg|safe}} {{title_geral}}</h2>
      <div class="ml-5">
        <button type="button" class="btn btn-outline-danger  btn-sm mt-2" onclick="refreshPage()">
          <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M432 48H208c-17.7 0-32 14.3-32 32V96H128V80c0-44.2 35.8-80 80-80H432c44.2 0 80 35.8 80 80V304c0 44.2-35.8 80-80 80H416V336h16c17.7 0 32-14.3 32-32V80c0-17.7-14.3-32-32-32zM48 448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V256H48V448zM64 128H320c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V192c0-35.3 28.7-64 64-64z"/></svg>
          </svg>
        Restaurar posição original
        </button>
      </div>
      <script>
        function refreshPage() {
          location.reload(); // Atualiza a página
        }
      </script>
      &nbsp;
      <a class="w-50 " href="{% url 'controle_estoque:program_estoque_CreateVies' %}"><button type="button" class="btn btn-primary btn-sm mt-2" onclick="">Adicionar à programação <svg xmlns="http://www.w3.org/2000/svg" class=" text-light " height="1em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg></button></a>
    </div>
  </div >
  
<div class="modal modal-sheet position-static d-block p-4 p-md-2 py-md-5 "  tabindex="-1" role="dialog" id="modalTour">
  


  <div id=""  class="toast shadow-sm  p-3 w-100 bg-body-secondary moveDiv" role="alert" aria-live="assertive" aria-atomic="true" id="resizable-toast" >
    <div class="border d-flex  ">        
      <strong class="me-auto"><h3 class='raleway text-primary'>{{svgE|safe}}{{title}} {{object.data_agendamento}}</h3> </strong>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>      
    </div>
    <div class="toast-body "> 
      <!--MOVIMENTOS DE ENTRADA E SAIDA DE ESTOQUE-->            

            <div id=""  class="toast shadow-sm  m-2 p-3 w-100  " role="alert" aria-live="assertive" aria-atomic="true" id="resizable-toast">
              <div class="d-flex">        
                <strong class="me-auto"><h4 class='raleway'>                  
                  {{svgE|safe}}{{title}} {{object.data_agendamento}}</h4> </strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>      
              </div>
              <div class="toast-body "> 
                <div class="modal-content rounded-4 " >                  
                 {% if not title == "DETALHADO: Programação de Saída do dia" %}
                    <table class="table table-striped border-0">
                      <thead>
                        <tr>                        
                          <th scope="col">Destino</th>
                          <th scope="col">Data de Agendamento</th>
                          <th scope="col">Produtos</th>
                          <th scope="col">AÇÕES</th>
                        </tr>
                      </thead>
                      <tbody>
                      {% for n in object_list %}
                        <tr>      
                          <td>{{n.escola_beneficiaria.nome_escola}}</td>
                          <td>{{n.data_agendamento}}</td>
                          <td>
                            {% for n in n.movimentacoes_estoque.all %}
                              {{n.alimento}}
                            {% endfor %}

                          </td>  
                          <td class=''>
                            <a href="{% url 'controle_estoque:program_estoque_UpdateView' n.pk %}" class='pt-0' title='Editar'>
                              <span class="material-symbols-outlined  text-primary ">edit_square</span></a> 
                            <a href="{% url 'controle_estoque:program_estoque_DeleteViews' n.pk %}" title='Excluir'> 
                              <span class="material-symbols-outlined text-danger">delete</span>
                            </a>
                            <a href="{% url 'controle_estoque:detalhe_UpdateView' n.pk %}" title='Visualizar '> 
                              <svg class="bi" style="margin-bottom: 0.3rem;" xmlns="http://www.w3.org/2000/svg" height="1.4em" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"/></svg>
                            </a>
                          </td>
                        </tr>  
                      {% endfor %}        
                      </tbody>
                    </table> 
                    {% else %}

                    <!--impressão-->
                    <div class="text-end d-flex" style="margin-left:50rem; margin-top:-3.2rem" >
                      <a class="w-50 m-2" href="{% url 'controle_estoque:program_estoque_listaView' %}"><button type="button" class="btn btn-info btn-sm mt-2" onclick="">Voltar para a lista de programações <svg xmlns="http://www.w3.org/2000/svg" class=" text-light " height="1em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg></button></a>
                      <button class="btn btn-secondary btn-sm  m-3" onclick="imprimirConteudo()">Imprimir <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zM432 248a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg></button>
                    </div>
                    
                    
                    <div id="imprime" style="width:58rem; margin:3rem auto; box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px; ">
                      <div>
                        <div style="text-align:center;margin: 2.5rem auto;"><span><img height='110' src="{% static 'timbre_.jpg' %}" alt=""></span></div>
                        <h1 style="padding: 0.5rem; font-size: 1rem;margin:1rem 0.5rem; text-transform: uppercase; background-color: rgba(0, 0, 0, 0.5);">Programação de Saída do estoque</h1>
                      </div>
                      <div class="table-row">
                        <div style="display:flex;"><div style="display:flex;   margin-left: 1rem;"><b>Data de agendamento de envio à escola: </b></div><div class="table-cell"> {{ programacao.data_agendamento }}</div></div>
                        <div style="display:flex;"><div style="display:flex;margin-left: 1rem;"><b>Escola Beneficiária:</b></div><div class="table-cell"> {{ programacao.escola_beneficiaria }}</div></div>
                        <hr style="display:flex; width: 97%; margin-left: 1rem;">
                        <h5 style="display:flex; width: 97%; margin-left: 1rem;"> Informações de saída:</h5>
                        <div style="margin-left: 1rem; display: flex; width: 97%;border: 0.1rem slategray solid;">
                          <div style="background-color:white;   margin-left: 1rem; display: flex; width: 40rem; " >
                            {% for movimentacao in programacao.movimentacoes_estoque.all %}
                              <div style="margin: 1rem; width: 17rem; text-align: right;font-weight: bold; font-size: 0.8rem; ">
                                <p style="margin: 0rem;">Tipo de Alimento:</p>
                                <p style="margin: 0rem;">Fornecedor:</p>
                                <p style="margin: 0rem;">Data e Hora de Saída do estoque:</p>
                                <p style="margin: 0rem;">Nº da Nota Fiscal:</p>
                                <p style="margin: 0rem;">Quantidade:</p>
                                <p style="margin: 0rem;">Nutricionista:</p>
                                <p style="margin: 0rem;">Observações:</p>
                                
                              </div>
                              <div style="margin: 1rem; width: 30rem;font-size: 0.8rem;  ">
                                <p style="margin: 0rem;">{{ movimentacao.alimento }}</td>
                                <p style="margin: 0rem;">{{ movimentacao.fornecedor_alimento }}</p>
                                <p style="margin: 0rem;">{{ movimentacao.data_hora }}</p>
                                <p style="margin: 0rem;">{{ movimentacao.numero_nota_fiscal }}</p>
                                <p style="margin: 0rem;">{{ movimentacao.quantidade }} {{ movimentacao.unidadeMedida }}</p>
                                <p style="margin: 0rem; text-transform:capitalize;">{{ movimentacao.responsavel }}</p>
                                <p style="margin: 0rem !important;">{{ movimentacao.observacoes }}</p>                                                       
                              </div>            
                            {% endfor %}  
                          </div>                       
                        </div> 
                        <div style="margin: 1rem;font-weight: bold; ">
                          <p>Assinatura do despachante: __________________________________________________</p>
                          <p>Assinatura do Nutricionista que emitiu o documento: _______________________________________ </p> 
                        </div>                 
                  {% endif %}
                </div> 
                            
                

                
                  
                  
  
              </div>
            </div>
      
           









    </div>
  </div>            
</div>
{% endblock main %}
{% block script %}

<script>
  function imprimirConteudo() {
      // Seleciona a div que quer imprimir
      var divToPrint = document.getElementById('imprime');

      // Cria um objeto de janela para impressão
      var windowPrint = window.open('', '', 'height=600,width=800');

      // Escreve o conteúdo da div na janela de impressão
      windowPrint.document.write("<html><head><title>''</title><style>h1{padding: 0.5rem; font-size: 10rem;margin:1rem 0.5rem; text-transform: uppercase; background-color: rgba(0, 0, 0, 0.5);}</style></head><body>");
      windowPrint.document.write(divToPrint.innerHTML);
      windowPrint.document.write('<footer></footer></body></html>');

      // Chama o método de impressão
      windowPrint.print();

      // Fecha a janela de impressão
      windowPrint.close();
  }
</script>






<script>
    // In your Javascript (external .js resource or <script> tag)
    $(document).ready(function() {
        $('#id_bairro').select2();
        $('#id_rua').select2();
    });   
    
</script>


<!--Bibliotecas Jquery para tornar o elemento redimensionavel na tela-->

<script src="{% static 'global/js/cheatsheet.js' %}"></script>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/smoothness/jquery-ui.css">
<script>
  $(document).ready(function() {
    $("#info_estoque").resizable({
      handles: "n, e, s, w", // permite redimensionamento apenas pelo lado leste (direito)
      minWidth: 600, // largura mínima permitida
      maxWidth: 1500 // largura máxima permitida
    });

    $("#resizable-moviEstoque").resizable({
      handles: "e", // permite redimensionamento apenas pelo lado leste (direito)
      minWidth: 200, // largura mínima permitida
      maxWidth: 1500 // largura máxima permitida
    });
  });
</script>

<!--remover o link de desenvolvedor do grafico-->
<script>
  document.addEventListener('DOMContentLoaded', function () {
      var plotlyLinks = document.querySelectorAll('.js-plot-link-container a:not([href^="https://plotly.com"])');
      Array.prototype.forEach.call(plotlyLinks, function (plotlyLink) {
          plotlyLink.style.display = 'none';
      });
  });
</script>

<!--DRAG AND DROP-->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
  $(document).ready(function() {
    $(".moveDiv").draggable();
  });
</script>
<!--fim DRAG AND DROP-->


{% endblock script %}




