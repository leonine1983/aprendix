{% extends 'global/template.html' %}
{% load static %}
{% block css %}
.modal-sheet .modal-dialog {
    width: 380px;
    transition: bottom .75s ease-in-out;
  }
  .modal-sheet .modal-footer {
    padding-bottom: 2rem;
    
  }
  .content-main{
    overflow-y: scroll;
  }

/* Minhas Personalizações */
#info_estoque{
  width:37% 
}


.border{
  border:none;
}


  /* Estilo iOS */
  .switch__container {
    margin: 3px auto;
  }
  
  .switch {
    visibility: hidden;
    position: absolute;
    margin-left: -9999px;
  }
  
  .switch + label {
    display: block;
    position: relative;
    cursor: pointer;
    outline: none;
    user-select: none;
  }

  .switch + label {
    display: block;
    position: relative;
    cursor: pointer;
    outline: none;
    user-select: none;
  }
  
  .switch--flat + label {
    padding: 2px;
    width: 90px;
    height: 30px;
    background-color: #dddddd;
    border-radius: 30px;
  }
  .switch--flat + label:before,
  .switch--flat + label:after {
    display: block;
    position: absolute;
    top: 1px;
    left: 1px;
    bottom: 1px;
    content: "";
  }
  .switch--flat + label:before {
    right: 1px;
    background-color: #f1f1f1;
    border-radius: 30px;
    transition: background 0.4s;
  }
  .switch--flat + label:after {
    width: 32px;
    background-color: #fff;
    border-radius: 100%;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    transition: all 0.4s;
  }
  .switch--flat:checked + label:before {
    background-color: #8ce196;
  }
  .switch--flat:checked + label:after {
    transform: translateX(60px);
  }


  
  .switch--shadow + label {
    padding: 2px;
    width: 90px;
    height: 30px;
    background-color: #dddddd;
    border-radius: 30px;
  }
  .switch--shadow + label:before,
  .switch--shadow + label:after {
    display: block;
    position: absolute;
    top: 1px;
    left: 1px;
    bottom: 1px;
    content: "";
  }
  .switch--shadow + label:before {
    right: 1px;
    background-color: #f1f1f1;
    border-radius: 30px;
    transition: background 0.4s;
  }
  .switch--shadow + label:after {
    width: 32px;
    background-color: #fff;
    border-radius: 100%;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    transition: all 0.4s;
  }
  .switch--shadow:checked + label:before {
    background-color: #8ce196;
  }
  .switch--shadow:checked + label:after {
    transform: translateX(60px);
  }



  .switch--estoque + label {
    padding: 2px;
    width: 90px;
    height: 30px;
    background-color: #dddddd;
    border-radius: 30px;
  }
  .switch--estoque + label:before,
  .switch--estoque + label:after {
    display: block;
    position: absolute;
    top: 1px;
    left: 1px;
    bottom: 1px;
    content: "";
  }
  .switch--estoque + label:before {
    right: 1px;
    background-color: #f1f1f1;
    border-radius: 30px;
    transition: background 0.4s;
  }
  .switch--estoque + label:after {
    width: 32px;
    background-color: #fff;
    border-radius: 100%;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    transition: all 0.4s;
  }
  .switch--estoque:checked + label:before {
    background-color: #8ce196;
  }
  .switch--estoque:checked + label:after {
    transform: translateX(60px);
  }

  
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">




  

{% endblock css %}
{% block menu_horizontal %}
<!--Menu horizontal Local-->
{% include 'global/partials/breadcrumbs/index.html' %}

{% endblock menu_horizontal %}
{% block main %}






  <div class="col" style='margin-bottom:-2rem'>    
    <div class="d-flex bg-body-secondary p-2 ">
      <h2 class='raleway'>{{svg|safe}} {{title_geral}}</h2>
      <div class="ml-5">
        <button type="button" class="btn btn-outline-danger  btn-sm mt-2" onclick="refreshPage()">
          <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M432 48H208c-17.7 0-32 14.3-32 32V96H128V80c0-44.2 35.8-80 80-80H432c44.2 0 80 35.8 80 80V304c0 44.2-35.8 80-80 80H416V336h16c17.7 0 32-14.3 32-32V80c0-17.7-14.3-32-32-32zM48 448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V256H48V448zM64 128H320c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V192c0-35.3 28.7-64 64-64z"/></svg>
          </svg>
        Restaurar posição original
        </button>
      </div>
      <script>
        function refreshPage() {
          location.reload(); // Atualiza a página
        }
      </script>
      &nbsp;
      <a class="w-50 " href="{% url 'controle_estoque:movi_estoque_entrada_CreateVies' %}"><button type="button" class="btn btn-primary btn-sm mt-2" onclick="">Adicionar <svg xmlns="http://www.w3.org/2000/svg" class=" text-light " height="1em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg></button></a>
    </div>
  </div >
  
<div class="modal modal-sheet position-static d-block p-4 p-md-2 py-md-5 "  tabindex="-1" role="dialog" id="modalTour">
  {% if alimentos_estoque %}
  <div class="row">     
    
    <!--Exibe informações do estoque-->
    <div id="info_estoque"  class="toast shadow-sm m-1 moveDiv" role="alert" aria-live="assertive" aria-atomic="true" id="resizable-toast">
      <div class="toast-header">        
        <strong class="me-auto"><h4 class='raleway'>{{svg|safe}} Estoque:</h4> </strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body "> 
        <div class="modal-content rounded-4 " >
          <table class="table table-striped  table-success ">
            <thead>
            <tr>
              <th scope="col">Produto</th>
              <th scope="col">Quantidade</th>
              <th scope="col">Categoria</th>
            </tr>
            </thead>
            <tbody>
              {% for n in alimentos_estoque%}
            <tr>            
              <td>{{n.nome}}</td>            
              <td>{{n.quantidade_disponivel}} {{n.unidade}}</td>
              <td>{{n.categoria_alimento}}</td>
            </tr>  
            {% endfor %}        
            </tbody>
          </table>     
        </div> 
      </div>
    </div>
 

    <!--Grafico do Estoque-->
    <div id="info_estoque" role="alert" class="toast col m-3 w-75 moveDiv">   
      
      <div class="toast-header">        
        <strong class="me-auto"><h4 class='raleway'>{{svg|safe}}Gráfico do Estoque: </h4> </strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>      
      </div>
      <div class="grafico">
      {{plot_div|safe}}
      </div>
    </div>

  </div>  
  {% endif %}


  <div id=""  class="toast shadow-sm  p-3 w-100 bg-body-secondary moveDiv" role="alert" aria-live="assertive" aria-atomic="true" id="resizable-toast" >
    <div class="border d-flex  ">        
      <strong class="me-auto"><h3 class='raleway text-primary'>Movimentos de Entrada e Saída de Produtos do Estoque</h3> </strong>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>      
    </div>
    <div class="toast-body "> 
      <!--MOVIMENTOS DE ENTRADA E SAIDA DE ESTOQUE-->
            <!-- Movimentações de Entrada -->
            <div id=""  class="toast shadow-sm  m-2 p-3 w-100  " role="alert" aria-live="assertive" aria-atomic="true" id="resizable-toast">
              <div class="d-flex">        
                <strong class="me-auto"><h4 class='raleway'>                  
                  {{svgE|safe}}{{title}}</h4> </strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>      
              </div>
              <div class="toast-body "> 
                <div class="modal-content rounded-4 " >
                  <table class="table table-striped border-0">
                    <thead>
                      <tr>
                        <th scope="col">Produto</th>
                        <th scope="col">Data</th>
                        <th scope="col">Tipo</th>
                        <th scope="col">Quantidade</th>
                        <th scope="col">Fornecedor</th>
                        <th scope="col">AÇÕES</th>
                      </tr>
                    </thead>
                    <tbody>
                    {% for n in object_list %}
                      <tr>            
                        <td>{{n.alimento.nome}}</td>          
                        <td>{{n.data_hora}}</td>
                        <td>{{n.tipo}}</td>
                        <td>{{n.quantidade}} {{n.unidadeMedida}}</td>
                        <td>{{n.fornecedor_alimento}}</td>
                        <td class=''>
                          <a href="{% url 'controle_estoque:movi_estoque_UpdateView' n.pk %}" class='pt-0' title='Editar'>
                            <span class="material-symbols-outlined  text-primary ">edit_square</span></a> 
                          <a href="{% url 'controle_estoque:movi_estoque_DeleteViews' n.pk %}" title='Excluir'> 
                            <span class="material-symbols-outlined text-danger">delete</span>
                          </a></td>
                      </tr>  
                    {% endfor %}        
                    </tbody>
                  </table>  
      
                </div> 
              </div>
            </div>
      
            <!-- Movimentações de Saída -->
            <div id=""  class="toast  m-2 p-3 w-100  " role="alert" aria-live="assertive" aria-atomic="true" id="resizable-toast" onmousedown="drag(event)">
              <div class="d-flex">        
                <strong class="me-auto"><h4 class='raleway'>{{svg|safe}} Movimento de Saída</h4> </strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>      
              </div>
      
              <div class="toast-body "> 
                <div class="modal-content rounded-4 " >
                  <table class="table table-striped border-0">
                    <thead>
                      <tr>
                        <th scope="col">Produto</th>
                        <th scope="col">Data</th>
                        <th scope="col">Tipo</th>
                        <th scope="col">Quantidade</th>
                        <th scope="col">Fornecedor</th>
                        <th scope="col">AÇÕES</th>
                      </tr>
                    </thead>
                    <tbody>
                    {% for n in alimentos_saida %}
                      <tr>            
                        <td>{{n.alimento.nome}}</td>          
                        <td>{{n.data_hora}}</td>
                        <td>{{n.tipo}}</td>
                        <td>{{n.quantidade}} {{n.unidadeMedida}}</td>
                        <td>{{n.fornecedor_alimento}}</td>
                        <td class=''>
                          <a href="{% url 'controle_estoque:movi_estoque_UpdateView' n.pk %}" class='pt-0' title='Editar'>
                            <span class="material-symbols-outlined  text-primary ">edit_square</span></a> 
                          <a href="{% url 'controle_estoque:movi_estoque_DeleteViews' n.pk %}" title='Excluir'> 
                            <span class="material-symbols-outlined text-danger">delete</span>
                          </a></td>
                      </tr>  
                    {% endfor %}        
                    </tbody>
                  </table>  
                </div> 
              </div>
            </div>
      









    </div>
  </div>            
</div>
{% endblock main %}
{% block script %}

 
<script>
    // In your Javascript (external .js resource or <script> tag)
    $(document).ready(function() {
        $('#id_bairro').select2();
        $('#id_rua').select2();
    });   
    
</script>


<!--Bibliotecas Jquery para tornar o elemento redimensionavel na tela-->

<script src="{% static 'global/js/cheatsheet.js' %}"></script>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/smoothness/jquery-ui.css">
<script>
  $(document).ready(function() {
    $("#info_estoque").resizable({
      handles: "n, e, s, w", // permite redimensionamento apenas pelo lado leste (direito)
      minWidth: 600, // largura mínima permitida
      maxWidth: 1500 // largura máxima permitida
    });

    $("#resizable-moviEstoque").resizable({
      handles: "e", // permite redimensionamento apenas pelo lado leste (direito)
      minWidth: 200, // largura mínima permitida
      maxWidth: 1500 // largura máxima permitida
    });
  });
</script>

<!--remover o link de desenvolvedor do grafico-->
<script>
  document.addEventListener('DOMContentLoaded', function () {
      var plotlyLinks = document.querySelectorAll('.js-plot-link-container a:not([href^="https://plotly.com"])');
      Array.prototype.forEach.call(plotlyLinks, function (plotlyLink) {
          plotlyLink.style.display = 'none';
      });
  });
</script>

<!--DRAG AND DROP-->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
  $(document).ready(function() {
    $(".moveDiv").draggable();
  });
</script>
<!--fim DRAG AND DROP-->


{% endblock script %}




