{% extends "modulo_aluno/base.html" %}
{% load static %}
{% block main %}
<style>
    #id_login_aluno, #id_senha{
        background-color: rgb(248, 124, 200)!important;
    }
    .form-section-title {
    font-size: 1.2rem;
    color: #333;
    margin-top: 20px;
    margin-bottom: 10px;
}

.form-group {
    margin-bottom: 15px;
}
#id_aluno_exterior{
    display: grid;
    grid-template-columns: 1fr 1fr;
    justify-content: center !important;
    gap: 2;
    border: #333;
}
#id_pais_origem, #id_data_entrada_no_pais, #id_documento_estrangeiro{
    background-color: cadetblue !important ;
}


 
</style>
<link rel="stylesheet" href="{% static 'global/css/form_win11.css' %}">
<div class="container p-4 bg-light text-muted " style=" color: #fff; border-radius: 8px; width:95vw; margin-top:5rem!important">
    <div class="container border-bottom" >
        <!-- Container para centralizar o conteúdo e garantir responsividade -->
        <div class="row align-items-center">
            <!-- Linha para organizar os elementos em colunas -->
            <div class="col-2 text-center mb-3">
                <img src="{% static 'SME - 2 PNG.png' %}" class="img-fluid" alt="Logo">
            </div>
            <div class="col">
                <!-- Coluna que ocupa 12 espaços na tela pequena -->
                <a class="nav-link btn border w-100 text-center" title="Atualizar Data de Nascimento | NIS | CNS" href="{% url 'Gestao_Escolar:cadastro_aluno_etapa2' request.user.userAluno_related.aluno.id %}">
                    <span class="fs-6">Data de Nascimento | NIS | CNS</span>
                </a>
                <!-- Usar w-100 para o link ocupar toda a largura da coluna e text-center para centralizar o texto -->
            </div>
            <div class="col">
                <!-- Coluna que ocupa 12 espaços na tela pequena -->
                <a class="nav-link btn border w-100 text-center" title="Atualizar Data de Nascimento | NIS | CNS" href="{% url 'Gestao_Escolar:cadastro_aluno_etapa2' request.user.userAluno_related.aluno.id %}">
                    <span class="fs-6">Data de Nascimento | NIS | CNS</span>
                </a>
                <!-- Usar w-100 para o link ocupar toda a largura da coluna e text-center para centralizar o texto -->
            </div>
        </div>
    </div>
    <h2 class="h2 fs-5 mt-3">Aviso de Atualização de Cadastro</h2>

    <div class="container mt-1">
        <!-- Mensagem de aviso -->
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
            <strong>Atenção!</strong> Antes de realizar a matrícula do aluno, é necessário realizar a <strong>atualização do cadastro</strong>. 
            Isso é importante para garantir que todos os documentos estejam em ordem e para verificar se há alguma pendência.
        </div>
    </div>
    
    
    <form method="post" class='win11-form'>
        {% csrf_token %}
        <h2 class="form-section-title">Informações sobre o CPF</h2>
        <div class="form-grid border p-2 m-2">
            <div>
                {% for error in form.CPF.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.CPF.label }}
                {{ form.CPF }}
            </div>
        </div>
    
        <h2 class="form-section-title">Informações sobre Documento de Identidade (RG)</h2>
        <div class="form-grid border p-2 m-2">
            <div>
                {% for error in form.RG.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.RG.label }}
                {{ form.RG }}
            </div>
            <div>
                {% for error in form.RG_emissao.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.RG_emissao.label }}
                {{ form.RG_emissao }}
            </div>
            <div>
                {% for error in form.orgao_emissor.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.orgao_emissor.label }}
                {{ form.orgao_emissor }}
            </div>
            <div>
                {% for error in form.RG_UF.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.RG_UF.label }}
                {{ form.RG_UF }}
            </div>
            <div>
                {% for error in form.naturalidade.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.naturalidade.label }}
                {{ form.naturalidade }}
            </div>
            <div>
                {% for error in form.estado_naturalidade.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.estado_naturalidade.label }}
                {{ form.estado_naturalidade }}
            </div>
            <div>
                {% for error in form.nacionalidade.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.nacionalidade.label }}
                {{ form.nacionalidade }}
            </div>
        </div>
    
        <h2 class="form-section-title">Se extrangeiro</h2>
        <div class="form-grid border p-2 m-2 bg-danger-subtle p-3 rounded-2">
            <div class="d-flex">
                {% for error in form.aluno_exterior.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.aluno_exterior.label }}
                {{ form.aluno_exterior }}
            </div>
            <div>
                {% for error in form.pais_origem.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.pais_origem.label }}
                {{ form.pais_origem }}
            </div>
            <div>
                {% for error in form.data_entrada_no_pais.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.data_entrada_no_pais.label }}
                {{ form.data_entrada_no_pais }}
            </div>
            <div>
                {% for error in form.documento_estrangeiro.errors %}
                    <div class="error-message">{{ error }}</div>
                {% endfor %}
                {{ form.documento_estrangeiro.label }}
                {{ form.documento_estrangeiro }}
            </div>
        </div>
    
        <button type="submit" class="btn btn-win11-primary btn-lg">Próxima Etapa</button>
    </form>
    
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.9/jquery.inputmask.min.js" integrity="sha512-F5Ul1uuyFlGnIT1dk2c4kB4DBdi5wnBJjVhL7gQlGh46Xn0VhvD8kgxLtjdZ5YN83gybk/aASUAlpdoWUjRR3g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    $(document).ready(function() {
        // Aplicando a máscara de CPF (xxx.xxx.xxx-xx)
        $('#id_RG').inputmask('999.999.99-99');        
        
        // Aplicando a máscara de NIS (xxxxxxxxxxxxxxx)
        $('#id_CPF').inputmask('999.999.999-99');

        // Aplicando mascara no NIS
        $('#id_cartao_nacional_saude_cns').inputmask('999.9999.9999.9999');
    });

   
</script>
 



<script>
    // Função que ativa ou desativa os campos
    function toggleFields() {
        const isChecked = document.getElementById('id_aluno_exterior').checked;
        
        // Ativar ou desativar campos dependendo do estado do checkbox
        document.getElementById('id_pais_origem').disabled = !isChecked;        
        document.getElementById('id_data_entrada_no_pais').disabled = !isChecked;
        document.getElementById('id_documento_estrangeiro').disabled = !isChecked;

         // Alterar o fundo para branco ou voltar para cadetblue
             // Forçar a mudança do fundo para branco ou cadetblue, ignorando o !important no CSS
        if (isChecked) {
            document.getElementById('id_pais_origem').style.setProperty('background-color', 'white', 'important');
            document.getElementById('id_data_entrada_no_pais').style.setProperty('background-color', 'white', 'important');
            document.getElementById('id_documento_estrangeiro').style.setProperty('background-color', 'white', 'important');
        } else {
            document.getElementById('id_pais_origem').style.setProperty('background-color', 'cadetblue', 'important');
            document.getElementById('id_data_entrada_no_pais').style.setProperty('background-color', 'cadetblue', 'important');
            document.getElementById('id_documento_estrangeiro').style.setProperty('background-color', 'cadetblue', 'important');
        }
    }

    // Adicionar evento para alternar os campos quando o checkbox for clicado
    document.getElementById('id_aluno_exterior').addEventListener('change', toggleFields);
</script>

{% endblock main %}



